# Managed by Ansible

[Main]

{% if datadog_config["dd_url"] is not defined -%}
  dd_url: {{ datadog_url | default('https://app.datadoghq.com') }}
{% endif %}
{% if datadog_config["api_key"] is not defined -%}
  api_key: {{ datadog_api_key | default('youshouldsetthis') }}
{% endif %}
{% if datadog_config["use_mount"] is not defined -%}
  use_mount: {{ datadog_use_mount | default('no') }}
{% endif %}

{# These variables are free-style, passed through a hash -#}
{% if datadog_config -%}
  {{ datadog_config | to_nice_yaml }}
{% endif %}

{# logformat is a bit fiddly, it's presence as a setting changes the format dramatically #}
{% if data_dog_stream_response_time %}
dogstreams: /www/logs/www.udemy.com/access_log_nginx:/etc/dd-agent/checks.d/parse-nginx-access-log.py:parselog
{% endif %}
